"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function getArray(e,t,n){return[].concat(_toConsumableArray(Array(t))).map(function(){return[].concat(_toConsumableArray(Array(e))).map(function(){return n()})})}function getOffset(e,t,n,r,a,o){var c=0,i=0;return i=t<Math.floor(o/2)?0:t>=Math.floor(o/2)&&t<r-Math.floor(o/2)?Math.floor(o/2)-t:Math.floor(o)-r,c=e<Math.floor(a/2)?0:e>=Math.floor(a/2)&&e<n-Math.floor(a/2)?Math.floor(a/2)-e:Math.floor(a)-n,{left:c,top:i}}function getNewPosition(e,t){var n=e.x,r=e.y;switch(t){case UP:r-=1;break;case RIGHT:n+=1;break;case DOWN:r+=1;break;case LEFT:n-=1}return{x:n,y:r}}function getRandomInt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function getWall(e,t,n){for(var r=!1,a=void 0,o=void 0;!r;)a=getRandomInt(1,t-1),o=getRandomInt(1,n-1),e[o][a].type!==SOIL||e[o-1][a].type!==SPACE&&e[o+1][a].type!==SPACE&&e[o][a-1].type!==SPACE&&e[o][a+1].type!==SPACE||(r=!0);return{x:a,y:o}}function checkFit(e,t,n,r,a,o,c,i){if(r<0||o>t-1||a<0||c>n-1)return!1;for(var s=r;s<=o;s++)for(var l=a;l<=c;l++)if(e[l][s].type!==i)return!1;return!0}function fillRect(e,t,n,r,a,o){for(var c=t;c<t+r;c++)for(var i=n;i<n+a;i++)e[i][c]=o}function getCurrentMapSize(e,t,n){for(var r=t-1,a=n-1,o=0,c=0,i=0;i<t;i++){for(var s=0;s<n;s++)if(e[s][i].type!==SOIL){r=i;break}if(r===i)break}for(var l=t-1;l>=0;l--){for(var u=n-1;u>=0;u--)if(e[u][l].type!==SOIL){o=l;break}if(o===l)break}for(var p=0;p<n;p++){for(var _=0;_<t;_++)if(e[p][_].type!==SOIL){a=p;break}if(a===p)break}for(var f=n-1;f>=0;f--){for(var R=t-1;R>=0;R--)if(e[f][R].type!==SOIL){c=f;break}if(c===f)break}return{width:o-r+1<0?0:o-r+1,height:c-a+1<0?0:c-a+1}}function generateMap(e,t){var n=getArray(e,t,function(){return SOIL_BLOCK}),r=getRandomInt(5,20),a=getRandomInt(5,20),o=Math.floor((e-r)/2),c=Math.floor((t-a)/2);fillRect(n,o,c,r,a,SPACE_BLOCK);for(var i=!1,s=!1,l=void 0,u=void 0,p=void 0,_=void 0;!i;){for(s=!1;!s;){var f=getWall(n,e,t);o=f.x,c=f.y,r=getRandomInt(5,20),a=getRandomInt(5,20),n[c-1][o].type===SPACE&&(l=getRandomInt(o-r+1,o+1),u=c+1,p=l+r-1,_=u+a-1,s=checkFit(n,e,t,l-1,u-1,p+1,_+1,SOIL)),n[c+1][o].type===SPACE&&(l=getRandomInt(o-r+1,o+1),_=c-1,u=_-a+1,p=l+r-1,s=checkFit(n,e,t,l-1,u-1,p+1,_+1,SOIL)),n[c][o-1].type===SPACE&&(u=getRandomInt(c-a+1,c+1),l=o+1,_=u+a-1,p=l+r-1,s=checkFit(n,e,t,l-1,u-1,p+1,_+1,SOIL)),n[c][o+1].type===SPACE&&(u=getRandomInt(c-a+1,c+1),p=o-1,l=p-r+1,_=u+a-1,s=checkFit(n,e,t,l-1,u-1,p+1,_+1,SOIL))}fillRect(n,o,c,1,1,SPACE_BLOCK),fillRect(n,l,u,p-l+1,_-u+1,SPACE_BLOCK);var R=getCurrentMapSize(n,e,t),A=R.width,C=R.height;A>=.85*e&&C>=.85*t&&(i=!0)}return n}function putOneThing(e,t,n,r,a,o,c){for(var i=!1,s=void 0,l=void 0;!i;)s=getRandomInt(1,n-1),l=getRandomInt(1,r-1),checkFit(a,n,r,s,l,s+o-1,l+c-1,SPACE)&&checkFit(t,n,r,s,l,s+o-1,l+c-1,TRANS)&&(i=!0);fillRect(t,s,l,o,c,e)}function getWeaponByFloor(e){var t=getRandomInt(2*(e-1),2*(e-1)+1);return WEAPONS[t]}function getEnemyByFloor(e){var t=getRandomInt(10*e+40-10,10*e+40+11),n=e,r=10*n;return{type:ENEMY,level:n,life:t,health:t,attack:r}}function getBossByFloor(e){var t=getRandomInt(30*e+40-10,30*e+40+11),n=e,r=30*n;return{type:BOSS,level:n,life:t,health:t,attack:r}}function calPlayerAttack(e,t){var n=t?t.attack:0;return 10*e+n}function generatePlayerPosition(e,t,n,r){for(var a=!1,o=void 0,c=void 0;!a;)o=getRandomInt(1,n-1),c=getRandomInt(1,r-1),checkFit(e,n,r,o,c,o,c,SPACE)&&checkFit(t,n,r,o,c,o,c,TRANS)&&(a=!0);return{x:o,y:c}}function generateThingsAndEnemies(e,t,n,r){var a=getArray(t,n,function(){return TRANS_BLOCK}),o=[];if(putOneThing(STAIRS_BLOCK,a,t,n,e,1,1),putOneThing(getWeaponByFloor(r),a,t,n,e,1,1),[].concat(_toConsumableArray(Array(getRandomInt(3,6)))).map(function(e,t){return t}).forEach(function(){putOneThing({type:MEDICINE,capacity:50},a,t,n,e,1,1)}),[].concat(_toConsumableArray(Array(getRandomInt(5,8)))).map(function(e,t){return t}).forEach(function(){var c=getEnemyByFloor(r);o.push(c),putOneThing({type:ENEMY,id:o.length-1},a,t,n,e,1,1)}),4===r){var c=getBossByFloor(r);o.push(c),putOneThing({type:BOSS,id:o.lenght-1},a,t,n,e,3,3)}return{things:a,enemies:o}}function deepFreeze(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){!e.hasOwnProperty(t)||null===e[t]||"object"!==_typeof(e[t])&&"function"!=typeof e[t]||Object.isFrozen(e[t])||deepFreeze(e[t])}),e}function darkness(){var e=arguments.length<=0||void 0===arguments[0]?initialDarknessState:arguments[0],t=arguments[1];switch(t.type){case TOGGLE_DARKNESS:return e=e===ON?OFF:ON;default:return e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function generateInitialGameState(){var e=generateMap(MAP_WIDTH,MAP_HEIGHT),t=generateThingsAndEnemies(e,MAP_WIDTH,MAP_HEIGHT,1),n=t.things,r=t.enemies,a=generatePlayerPosition(e,n,MAP_WIDTH,MAP_HEIGHT),o=100,c=1,i=0,s=50,l=null,u=calPlayerAttack(c,l);return a=_extends({},a,{health:o,level:c,exps:i,nextLevelExps:s,weapon:l,attack:u}),{map:e,things:n,enemies:r,player:a,message:"",dungeonFloor:1}}function game(){var e=arguments.length<=0||void 0===arguments[0]?initialGameState:arguments[0],t=arguments[1];switch(t.type){case PLAYER_MOVE:var n=getNewPosition(e.player,t.direction),r=_extends({},e.player,n);return _extends({},e,{player:r});case DOWN_STAIRS:var a=t.map,o=t.things,c=t.enemies,i=t.player,s=t.dungeonFloor,l=e.player,u=_extends({},l,i);return _extends({},e,{map:a,things:o,enemies:c,player:u,dungeonFloor:s});case FIGHT:var p=getNewPosition(e.player,t.direction),_=e.things.map(function(e){return e.map(function(e){return e})}),f=_[p.y][p.x],R=[].concat(_toConsumableArray(e.enemies)),A=_extends({},R[f.id]);R[f.id]=A;var C=_extends({},e.player),y=e.message;return A.health-=C.attack,A.health<=0&&(C.exps+=A.life,C.exps>=C.nextLevelExps&&(C.exps-=C.nextLevelExps,C.level+=1,C.nextLevelExps=50*C.level,C.attack=calPlayerAttack(C.level,C.weapon)),C.x=p.x,C.y=p.y,_[p.y][p.x]=TRANS_BLOCK),A.health>0&&(C.health-=A.attack),_extends({},e,{enemies:R,things:_,player:C,message:y});case EAT:var O=getNewPosition(e.player,t.direction),T=e.things.map(function(e){return e.map(function(e){return e})}),S=T[O.y][O.x],L=_extends({},e.player,O);return L.health+=S.capacity,T[O.y][O.x]=TRANS_BLOCK,_extends({},e,{things:T,player:L});case PICKUP:var h=getNewPosition(e.player,t.direction),d=e.things.map(function(e){return e.map(function(e){return e})}),B=d[h.y][h.x],m=_extends({},e.player,h);return m.weapon=B,m.attack=calPlayerAttack(m.level,m.weapon),d[h.y][h.x]=TRANS_BLOCK,_extends({},e,{things:d,player:m});case SET_MESSAGE:return _extends({},e,{message:t.message});default:return e}}function toggleDarkness(){return{type:TOGGLE_DARKNESS}}function playerMove(e){return{type:PLAYER_MOVE,direction:e}}function downStairs(e,t,n,r,a){return{type:DOWN_STAIRS,map:e,things:t,enemies:n,player:r,dungeonFloor:a}}function fight(e){return{type:FIGHT,direction:e}}function eat(e){return{type:EAT,direction:e}}function pickup(e){return{type:PICKUP,direction:e}}function handleMove(e){return function(t,n){var r=n(),a=r.game,o=a.map,c=a.things,i=(a.enemies,a.player),s=getNewPosition(i,e),l=s.x,u=s.y;if(!(l<0||l>=MAP_WIDTH||u<0||u>=MAP_HEIGHT)){var p=c[u][l].type===TRANS?o[u][l].type:c[u][l].type;switch(p){case SPACE:t(playerMove(e));break;case STAIRS:var _=generateMap(MAP_WIDTH,MAP_HEIGHT),f=a.dungeonFloor+1,R=generateThingsAndEnemies(_,MAP_WIDTH,MAP_HEIGHT,f),A=R.things,C=R.enemies,y=generatePlayerPosition(_,A,MAP_WIDTH,MAP_HEIGHT);t(downStairs(_,A,C,y,f));break;case ENEMY:t(fight(e));break;case MEDICINE:t(eat(e));break;case WEAPON:t(pickup(e))}}}}function setMessage(e){return{type:SET_MESSAGE,message:e}}function startNewGame(){return function(e,t){var n=generateMap(MAP_WIDTH,MAP_HEIGHT),r=1,a=generateThingsAndEnemies(n,MAP_WIDTH,MAP_HEIGHT,r),o=a.things,c=a.enemies,i=generatePlayerPosition(n,o,MAP_WIDTH,MAP_HEIGHT),s=100,l=1,u=0,p=50,_=null,f=calPlayerAttack(l,_);i=_extends({},i,{health:s,level:l,exps:u,nextLevelExps:p,weapon:_,attack:f}),e(downStairs(n,o,c,i,r)),setTimeout(function(){e(setMessage(""))},5e3)}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Footer(){return React.createElement("footer",{className:"HolyGrail-footer"},"♥ from the Zhenkyle")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function mapStateToPropsBackground(e){return{data:e.game.map}}function mapStateToPropsApp(e){var t=e.game.player.health,n=e.game.enemies[e.game.enemies.length-1].health,r=e.game.dungeonFloor,a=t>0,o=!(4===r&&n<0),c=e.game.message;return{playerAlive:a,bossAlive:o,message:c}}function mapDispatchToPropsApp(e){return{onDocumentKeyDown:function(t){e(handleMove(t))},onStartNewGame:function(){e(startNewGame())},onSetMessage:function(t){e(setMessage(t))}}}function mapStateToPropsPos(e){var t=e.game.player,n=t.x,r=t.y,a=MAP_WIDTH,o=MAP_HEIGHT,c=VIEW_WIDTH,i=VIEW_HEIGHT,s=getOffset(n,r,a,o,c,i),l=s.left,u=s.top;return{left:10*l,top:10*u}}function mapStateToPropsHeader(e){var t=e.game.player;return{health:t.health,weapon:null===t.weapon?"":t.weapon.name,attack:t.attack,level:t.level,nextLevelExps:t.nextLevelExps,dungeonFloor:e.game.dungeonFloor}}function mapDispatchToPropsHeader(e){return{onToggleDarknessClick:function(){e(toggleDarkness())}}}function mapStateToPropsMask(e){var t=e.game.player,n=MAP_WIDTH,r=MAP_HEIGHT,a=e.darkness,o=t.x,c=t.y,i=void 0;if(a===OFF)i=getArray(n,r,function(){return TRANS_BLOCK});else{i=getArray(n,r,function(){return BLACK_BLOCK});for(var s=[[BLACK_BLOCK,BLACK_BLOCK,BLACK_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,BLACK_BLOCK,BLACK_BLOCK,BLACK_BLOCK],[BLACK_BLOCK,BLACK_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,BLACK_BLOCK,BLACK_BLOCK],[BLACK_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,BLACK_BLOCK],[TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK],[TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK],[TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK],[TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK],[TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK],[TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK],[TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK],[BLACK_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,BLACK_BLOCK],[BLACK_BLOCK,BLACK_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,BLACK_BLOCK,BLACK_BLOCK],[BLACK_BLOCK,BLACK_BLOCK,BLACK_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,TRANS_BLOCK,BLACK_BLOCK,BLACK_BLOCK,BLACK_BLOCK]],l=s[0].length,u=s.length,p=void 0,_=void 0,f=0;f<u&&(_=c+f-Math.floor(u/2),!(_<0||_>r-1));f++)for(var R=0;R<l&&(p=o+R-Math.floor(l/2),!(p<0||p>n-1));R++)i[_][p]=s[f][R]}return{data:i}}function mapStateToPropsThings(e){return{data:e.game.things}}function mapStateToPropsUI(e){var t=e.game.player,n=MAP_WIDTH,r=MAP_HEIGHT,a=t.x,o=t.y,c=getArray(n,r,function(){return TRANS_BLOCK});c[o][a]=PLAYER_BLOCK;var i=e.game.player,s=i.x,l=i.y,u=VIEW_WIDTH,p=VIEW_HEIGHT,_=getOffset(s,l,n,r,u,p),f=_.left,R=_.top;return{data:c,left:10*f,top:10*R}}var TOGGLE_DARKNESS="TOGGLE_DARKNESS",PLAYER_MOVE="PLAYER_MOVE",DOWN_STAIRS="DOWN_STAIRS",FIGHT="FIGHT",EAT="EAT",PICKUP="PICKUP",SET_MESSAGE="SET_MESSAGE",UP=0,RIGHT=1,DOWN=2,LEFT=3,SOIL=0,SPACE=1,MEDICINE=2,PLAYER=3,ENEMY=4,WEAPON=5,STAIRS=6,TRANS=7,BLACK=8,BOSS=9,MAP_WIDTH=100,MAP_HEIGHT=80,VIEW_WIDTH=MAP_WIDTH,VIEW_HEIGHT=40,ON=1,OFF=0,WEAPONS=[{type:WEAPON,name:"wood stick",attack:10},{type:WEAPON,name:"stone stick",attack:20},{type:WEAPON,name:"stone axe",attack:30},{type:WEAPON,name:"copper sword",attack:40},{type:WEAPON,name:"iron sword",attack:50},{type:WEAPON,name:"long bow",attack:60},{type:WEAPON,name:"sharp spear",attack:70},{type:WEAPON,name:"dragon crystal",attack:80}],TRANS_BLOCK={type:TRANS},BLACK_BLOCK={type:BLACK},SPACE_BLOCK={type:SPACE},SOIL_BLOCK={type:SOIL},PLAYER_BLOCK={type:PLAYER},STAIRS_BLOCK={type:STAIRS},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},initialDarknessState=ON,_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},initialGameState=generateInitialGameState(),combineReducers=Redux.combineReducers,rootReducer=combineReducers({game:game,darkness:darkness}),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),App=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleKeyDown=n.handleKeyDown.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"handleKeyDown",value:function(e){var t=e.key;switch(t){case"ArrowUp":this.props.onDocumentKeyDown(UP);break;case"ArrowLeft":this.props.onDocumentKeyDown(LEFT);break;case"ArrowRight":this.props.onDocumentKeyDown(RIGHT);break;case"ArrowDown":this.props.onDocumentKeyDown(DOWN)}}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentWillReceiveProps",value:function(e){var t=e.playerAlive,n=e.bossAlive,r="";t?n||(r="Congratulations, you win! Now begin new game."):r="You've been killed, better luck next time.",t&&n||(this.props.onSetMessage(r),this.props.onStartNewGame())}},{key:"flashMessage",value:function(){return""===this.props.message?React.createElement("span",null):React.createElement("div",{id:"note"},this.props.message)}},{key:"render",value:function(){return React.createElement("div",{className:"HolyGrail"},this.flashMessage(),React.createElement(Header,null),React.createElement("div",{className:"HolyGrail-body"},React.createElement("main",{className:"HolyGrail-content"},React.createElement(ConnPos,null,React.createElement(Background,null),React.createElement(Things,null),React.createElement(Ui,null),React.createElement(Mask,null)))),React.createElement(Footer,null))}}]),t}(React.Component);App.propTypes={onDocumentKeyDown:React.PropTypes.func.isRequired,onStartNewGame:React.PropTypes.func.isRequired,onSetMessage:React.PropTypes.func.isRequired,playerAlive:React.PropTypes.bool.isRequired,bossAlive:React.PropTypes.bool.isRequired,message:React.PropTypes.string.isRequired};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Board=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.data!==e.data}},{key:"render",value:function(){return React.createElement("table",null,React.createElement("tbody",null,this.props.data.map(function(e,t){return React.createElement(BoardRow,{key:t,data:e})})))}}]),t}(React.Component);Board.propTypes={data:React.PropTypes.arrayOf(React.PropTypes.arrayOf(React.PropTypes.shape({type:React.PropTypes.number}))).isRequired};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),BoardCell=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.data!==e.data}},{key:"render",value:function(){var e=void 0;switch(this.props.data){case SOIL:e=null;break;case SPACE:e="room";break;case ENEMY:e="enemy";break;case BOSS:e="enemy";break;case MEDICINE:e="medicine";break;case PLAYER:e="player";break;case WEAPON:e="weapon";break;case STAIRS:e="stairs";break;case BLACK:e="black";break;default:e=null}return React.createElement("td",{className:e})}}]),t}(React.Component);BoardCell.propTypes={data:React.PropTypes.number.isRequired};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),BoardRow=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.data!==e.data}},{key:"render",value:function(){return React.createElement("tr",null,this.props.data.map(function(e,t){return React.createElement(BoardCell,{key:t,data:e.type})}))}}]),t}(React.Component);BoardRow.propTypes={data:React.PropTypes.arrayOf(React.PropTypes.shape({type:React.PropTypes.number})).isRequired};var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Pos=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.children;return React.createElement("div",{style:{top:this.props.top+"px",left:this.props.left+"px"}},e)}}]),t}(React.Component);Pos.propTypes={top:React.PropTypes.number.isRequired,left:React.PropTypes.number.isRequired,children:React.PropTypes.arrayOf(React.PropTypes.element).isRequired};var connect=ReactRedux.connect,Background=connect(mapStateToPropsBackground)(Board),connect=ReactRedux.connect,ConnApp=connect(mapStateToPropsApp,mapDispatchToPropsApp)(App),connect=ReactRedux.connect,ConnPos=connect(mapStateToPropsPos)(Pos),connect=ReactRedux.connect,Header=function(e){var t=e.onToggleDarknessClick,n=e.health,r=e.weapon,a=e.attack,o=e.level,c=e.nextLevelExps,i=e.dungeonFloor;return React.createElement("header",{className:"HolyGrail-header"},React.createElement("h1",null,"Dungeon Crawler"),React.createElement("h4",null,"Kill the boss in dungeon 4"),React.createElement("p",null,React.createElement("strong",null,"Health:")," ",n," ",React.createElement("strong",null,"Weapon:")," ",r," ",React.createElement("strong",null,"Attack:")," ",a," ",React.createElement("strong",null,"Level:")," ",o," ",React.createElement("strong",null,"Next Level:")," ",c,"XP ",React.createElement("strong",null,"Dungeon:")," ",i," ",React.createElement("button",{onClick:t},"Toggle Darkness")))};Header.propTypes={onToggleDarknessClick:React.PropTypes.func.isRequired,health:React.PropTypes.number.isRequired,weapon:React.PropTypes.string.isRequired,attack:React.PropTypes.number.isRequired,level:React.PropTypes.number.isRequired,nextLevelExps:React.PropTypes.number.isRequired,dungeonFloor:React.PropTypes.number.isRequired},Header=connect(mapStateToPropsHeader,mapDispatchToPropsHeader)(Header);var connect=ReactRedux.connect,Mask=connect(mapStateToPropsMask)(Board),connect=ReactRedux.connect,Things=connect(mapStateToPropsThings)(Board),connect=ReactRedux.connect,Ui=connect(mapStateToPropsUI)(Board),Provider=ReactRedux.Provider,store=Redux.createStore(rootReducer,Redux.compose(Redux.applyMiddleware(ReduxThunk["default"]),window.devToolsExtension?window.devToolsExtension():function(e){return e}));ReactDOM.render(React.createElement(Provider,{store:store},React.createElement(ConnApp,null)),document.getElementById("root"));
//# sourceMappingURL=../maps/scripts/app-90106501c6.js.map
