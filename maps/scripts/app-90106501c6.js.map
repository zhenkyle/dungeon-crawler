{"version":3,"sources":["scripts/app.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","getArray","x","y","func","concat","map","getOffset","playerX","playerY","mapWidth","mapHeight","viewWidth","viewHeight","left","top","Math","floor","getNewPosition","_ref","direction","UP","RIGHT","DOWN","LEFT","getRandomInt","min","max","ceil","random","getWall","found","type","SOIL","SPACE","checkFit","x1","y1","x2","y2","fitType","j","fillRect","w","h","thing","getCurrentMapSize","minX","minY","maxX","maxY","_i","_j","_j2","_i2","_j3","_i3","width","height","generateMap","SOIL_BLOCK","SPACE_BLOCK","complete","fit","_getWall","_getCurrentMapSize","currentWidth","currentHeight","putOneThing","onThings","onMap","TRANS","getWeaponByFloor","dungeonFloor","WEAPONS","getEnemyByFloor","life","level","attack","ENEMY","health","getBossByFloor","BOSS","calPlayerAttack","weapon","weaponAttack","generatePlayerPosition","generateThingsAndEnemies","things","TRANS_BLOCK","enemies","STAIRS_BLOCK","v","forEach","MEDICINE","capacity","enemy","push","id","boss","lenght","deepFreeze","o","Object","freeze","getOwnPropertyNames","prop","hasOwnProperty","_typeof","isFrozen","darkness","state","arguments","undefined","initialDarknessState","action","TOGGLE_DARKNESS","ON","OFF","generateInitialGameState","MAP_WIDTH","MAP_HEIGHT","_generateThingsAndEne","player","exps","nextLevelExps","_extends","message","game","initialGameState","PLAYER_MOVE","pos","DOWN_STAIRS","_player","oldPlayer","nextPlayer","FIGHT","_pos","_things","row","enemyInThings","_enemies","_player2","EAT","_pos2","_things2","medicine","_player3","PICKUP","_pos3","_things3","_player4","SET_MESSAGE","toggleDarkness","playerMove","downStairs","fight","eat","pickup","handleMove","dispatch","getState","_getNewPosition","brickType","STAIRS","_map","WEAPON","setMessage","startNewGame","_generateThingsAndEne2","setTimeout","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","Footer","React","createElement","className","mapStateToPropsBackground","data","mapStateToPropsApp","playerHealth","bossHealth","playerAlive","bossAlive","mapDispatchToPropsApp","onDocumentKeyDown","onStartNewGame","onSetMessage","mapStateToPropsPos","_state$game$player","VIEW_WIDTH","VIEW_HEIGHT","_getOffset","mapStateToPropsHeader","name","mapDispatchToPropsHeader","onToggleDarknessClick","mapStateToPropsMask","BLACK_BLOCK","shape","shapeWidth","shapeHeight","maskX","maskY","mapStateToPropsThings","mapStateToPropsUI","PLAYER_BLOCK","PLAYER","BLACK","Symbol","iterator","obj","assign","target","source","key","combineReducers","Redux","rootReducer","_createClass","defineProperties","props","descriptor","defineProperty","protoProps","staticProps","App","_React$Component","this","_this","getPrototypeOf","handleKeyDown","bind","event","keyName","document","addEventListener","removeEventListener","nextProps","flashMessage","Header","ConnPos","Background","Things","Ui","Mask","Component","propTypes","PropTypes","isRequired","bool","string","Board","apply","BoardRow","arrayOf","number","BoardCell","Pos","children","style","element","connect","ReactRedux","ConnApp","onClick","Provider","store","createStore","compose","applyMiddleware","ReduxThunk","window","devToolsExtension","f","ReactDOM","render","getElementById"],"mappings":"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","file":"scripts/app-90106501c6.js","sourcesContent":["'use strict';\n\nvar TOGGLE_DARKNESS = 'TOGGLE_DARKNESS';\nvar PLAYER_MOVE = 'PLAYER_MOVE';\nvar DOWN_STAIRS = 'DOWN_STAIRS';\nvar FIGHT = 'FIGHT';\nvar EAT = 'EAT';\nvar PICKUP = 'PICKUP';\nvar SET_MESSAGE = 'SET_MESSAGE';\n\"use strict\";\n\n// player move directions\nvar UP = 0;\nvar RIGHT = 1;\nvar DOWN = 2;\nvar LEFT = 3;\n\n// brick types\nvar SOIL = 0;\nvar SPACE = 1;\nvar MEDICINE = 2;\nvar PLAYER = 3;\nvar ENEMY = 4;\nvar WEAPON = 5;\nvar STAIRS = 6;\nvar TRANS = 7;\nvar BLACK = 8;\nvar BOSS = 9;\n\n// map size\nvar MAP_WIDTH = 100;\nvar MAP_HEIGHT = 80;\nvar VIEW_WIDTH = MAP_WIDTH;\nvar VIEW_HEIGHT = 40;\n\n// toggle darkness\nvar ON = 1;\nvar OFF = 0;\n\n// WEAPONS\nvar WEAPONS = [{ type: WEAPON, name: \"wood stick\", attack: 10 }, { type: WEAPON, name: \"stone stick\", attack: 20 }, { type: WEAPON, name: \"stone axe\", attack: 30 }, { type: WEAPON, name: \"copper sword\", attack: 40 }, { type: WEAPON, name: \"iron sword\", attack: 50 }, { type: WEAPON, name: \"long bow\", attack: 60 }, { type: WEAPON, name: \"sharp spear\", attack: 70 }, { type: WEAPON, name: \"dragon crystal\", attack: 80 }];\n\n// GLOBAL BLOCKS\nvar TRANS_BLOCK = { type: TRANS };\nvar BLACK_BLOCK = { type: BLACK };\nvar SPACE_BLOCK = { type: SPACE };\nvar SOIL_BLOCK = { type: SOIL };\nvar PLAYER_BLOCK = { type: PLAYER };\nvar STAIRS_BLOCK = { type: STAIRS };\n\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction getArray(x, y, func) {\n  return [].concat(_toConsumableArray(Array(y))).map(function () {\n    return [].concat(_toConsumableArray(Array(x))).map(function () {\n      return func();\n    });\n  });\n}\n\nfunction getOffset(playerX, playerY, mapWidth, mapHeight, viewWidth, viewHeight) {\n  var left = 0;\n  var top = 0;\n  if (playerY < Math.floor(viewHeight / 2)) {\n    top = 0;\n  } else if (playerY >= Math.floor(viewHeight / 2) && playerY < mapHeight - Math.floor(viewHeight / 2)) {\n    top = Math.floor(viewHeight / 2) - playerY;\n  } else {\n    top = Math.floor(viewHeight) - mapHeight;\n  }\n\n  if (playerX < Math.floor(viewWidth / 2)) {\n    left = 0;\n  } else if (playerX >= Math.floor(viewWidth / 2) && playerX < mapWidth - Math.floor(viewWidth / 2)) {\n    left = Math.floor(viewWidth / 2) - playerX;\n  } else {\n    left = Math.floor(viewWidth) - mapWidth;\n  }\n\n  return { left: left, top: top };\n}\n\nfunction getNewPosition(_ref, direction) {\n  var x = _ref.x;\n  var y = _ref.y;\n\n  switch (direction) {\n    case UP:\n      y -= 1;\n      break;\n    case RIGHT:\n      x += 1;\n      break;\n    case DOWN:\n      y += 1;\n      break;\n    case LEFT:\n      x -= 1;\n      break;\n    default:\n      break;\n  }\n  return { x: x, y: y };\n}\n\n// Return a random integer between min (included) and max (excluded)\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nfunction getWall(map, mapWidth, mapHeight) {\n  var found = false;\n  var x = void 0;\n  var y = void 0;\n  while (!found) {\n    x = getRandomInt(1, mapWidth - 1);\n    y = getRandomInt(1, mapHeight - 1);\n    if (map[y][x].type === SOIL && (map[y - 1][x].type === SPACE || map[y + 1][x].type === SPACE || map[y][x - 1].type === SPACE || map[y][x + 1].type === SPACE)) {\n      found = true;\n    }\n  }\n  return { x: x, y: y };\n}\n\nfunction checkFit(map, mapWidth, mapHeight, x1, y1, x2, y2, fitType) {\n  if (x1 < 0 || x2 > mapWidth - 1 || y1 < 0 || y2 > mapHeight - 1) {\n    return false;\n  }\n  for (var i = x1; i <= x2; i++) {\n    for (var j = y1; j <= y2; j++) {\n      if (map[j][i].type !== fitType) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nfunction fillRect(map, x, y, w, h, thing) {\n  for (var i = x; i < x + w; i++) {\n    for (var j = y; j < y + h; j++) {\n      map[j][i] = thing;\n    }\n  }\n}\n\nfunction getCurrentMapSize(map, mapWidth, mapHeight) {\n  var minX = mapWidth - 1;\n  var minY = mapHeight - 1;\n  var maxX = 0;\n  var maxY = 0;\n\n  for (var i = 0; i < mapWidth; i++) {\n    for (var j = 0; j < mapHeight; j++) {\n      if (map[j][i].type !== SOIL) {\n        minX = i;\n        break;\n      }\n    }\n    if (minX === i) {\n      break;\n    }\n  }\n\n  for (var _i = mapWidth - 1; _i >= 0; _i--) {\n    for (var _j = mapHeight - 1; _j >= 0; _j--) {\n      if (map[_j][_i].type !== SOIL) {\n        maxX = _i;\n        break;\n      }\n    }\n    if (maxX === _i) {\n      break;\n    }\n  }\n\n  for (var _j2 = 0; _j2 < mapHeight; _j2++) {\n    for (var _i2 = 0; _i2 < mapWidth; _i2++) {\n      if (map[_j2][_i2].type !== SOIL) {\n        minY = _j2;\n        break;\n      }\n    }\n    if (minY === _j2) {\n      break;\n    }\n  }\n\n  for (var _j3 = mapHeight - 1; _j3 >= 0; _j3--) {\n    for (var _i3 = mapWidth - 1; _i3 >= 0; _i3--) {\n      if (map[_j3][_i3].type !== SOIL) {\n        maxY = _j3;\n        break;\n      }\n    }\n    if (maxY === _j3) {\n      break;\n    }\n  }\n\n  return { width: maxX - minX + 1 < 0 ? 0 : maxX - minX + 1,\n    height: maxY - minY + 1 < 0 ? 0 : maxY - minY + 1 };\n}\n\nfunction generateMap(width, height) {\n  // 1. fill map with soil\n  var map = getArray(width, height, function () {\n    return SOIL_BLOCK;\n  });\n\n  // 2. fill center of the map with a rectangle room\n  var w = getRandomInt(5, 20);\n  var h = getRandomInt(5, 20);\n  var x = Math.floor((width - w) / 2);\n  var y = Math.floor((height - h) / 2);\n  fillRect(map, x, y, w, h, SPACE_BLOCK);\n\n  var complete = false;\n  var fit = false;\n  var x1 = void 0;\n  var y1 = void 0;\n  var x2 = void 0;\n  var y2 = void 0;\n\n  while (!complete) {\n    fit = false;\n    while (!fit) {\n      // 4. get a random rectangle room\n      var _getWall = getWall(map, width, height);\n      // 3. find a random wall on any room\n\n\n      x = _getWall.x;\n      y = _getWall.y;\n      w = getRandomInt(5, 20);\n      h = getRandomInt(5, 20);\n      // 5. see if it fit in map\n      if (map[y - 1][x].type === SPACE) {\n        // GOES DOWN\n        x1 = getRandomInt(x - w + 1, x + 1);\n        y1 = y + 1;\n        x2 = x1 + w - 1;\n        y2 = y1 + h - 1;\n        fit = checkFit(map, width, height, x1 - 1, y1 - 1, x2 + 1, y2 + 1, SOIL);\n      }\n      if (map[y + 1][x].type === SPACE) {\n        // GOES UP\n        x1 = getRandomInt(x - w + 1, x + 1);\n        y2 = y - 1;\n        y1 = y2 - h + 1;\n        x2 = x1 + w - 1;\n        fit = checkFit(map, width, height, x1 - 1, y1 - 1, x2 + 1, y2 + 1, SOIL);\n      }\n      if (map[y][x - 1].type === SPACE) {\n        // GOES RIGHT\n        y1 = getRandomInt(y - h + 1, y + 1);\n        x1 = x + 1;\n        y2 = y1 + h - 1;\n        x2 = x1 + w - 1;\n        fit = checkFit(map, width, height, x1 - 1, y1 - 1, x2 + 1, y2 + 1, SOIL);\n      }\n      if (map[y][x + 1].type === SPACE) {\n        // GOES LEFT\n        y1 = getRandomInt(y - h + 1, y + 1);\n        x2 = x - 1;\n        x1 = x2 - w + 1;\n        y2 = y1 + h - 1;\n        fit = checkFit(map, width, height, x1 - 1, y1 - 1, x2 + 1, y2 + 1, SOIL);\n      }\n\n      // 6. if fit continue, if not go back to 3.\n    }\n\n    // 7. draw the room on map\n    fillRect(map, x, y, 1, 1, SPACE_BLOCK);\n    fillRect(map, x1, y1, x2 - x1 + 1, y2 - y1 + 1, SPACE_BLOCK);\n\n    // 8. go back to 3. until dungeon generate complete\n\n    var _getCurrentMapSize = getCurrentMapSize(map, width, height);\n\n    var currentWidth = _getCurrentMapSize.width;\n    var currentHeight = _getCurrentMapSize.height;\n\n    if (currentWidth >= width * 0.85 && currentHeight >= height * 0.85) {\n      complete = true;\n    }\n  }\n  return map;\n}\n\n// 9. add stairs\n// 10. add monsters and items\nfunction putOneThing(thing, onThings, mapWidth, mapHeight, onMap, width, height) {\n  var found = false;\n  var x = void 0;\n  var y = void 0;\n  while (!found) {\n    x = getRandomInt(1, mapWidth - 1);\n    y = getRandomInt(1, mapHeight - 1);\n    if (checkFit(onMap, mapWidth, mapHeight, x, y, x + width - 1, y + height - 1, SPACE) && checkFit(onThings, mapWidth, mapHeight, x, y, x + width - 1, y + height - 1, TRANS)) {\n      found = true;\n    }\n  }\n  fillRect(onThings, x, y, width, height, thing);\n}\n\nfunction getWeaponByFloor(dungeonFloor) {\n  var i = getRandomInt((dungeonFloor - 1) * 2, (dungeonFloor - 1) * 2 + 1);\n  return WEAPONS[i];\n}\n\nfunction getEnemyByFloor(dungeonFloor) {\n  var life = getRandomInt(dungeonFloor * 10 + 40 - 10, dungeonFloor * 10 + 40 + 11);\n  var level = dungeonFloor;\n  var attack = level * 10;\n  return { type: ENEMY, level: level, life: life, health: life, attack: attack };\n}\n\nfunction getBossByFloor(dungeonFloor) {\n  var life = getRandomInt(dungeonFloor * 30 + 40 - 10, dungeonFloor * 30 + 40 + 11);\n  var level = dungeonFloor;\n  var attack = level * 30;\n  return { type: BOSS, level: level, life: life, health: life, attack: attack };\n}\n\n// add player\nfunction calPlayerAttack(level, weapon) {\n  var weaponAttack = weapon ? weapon.attack : 0;\n  return level * 10 + weaponAttack;\n}\n\nfunction generatePlayerPosition(onMap, onThings, mapWidth, mapHeight) {\n  var found = false;\n  var x = void 0;\n  var y = void 0;\n  while (!found) {\n    x = getRandomInt(1, mapWidth - 1);\n    y = getRandomInt(1, mapHeight - 1);\n    if (checkFit(onMap, mapWidth, mapHeight, x, y, x, y, SPACE) && checkFit(onThings, mapWidth, mapHeight, x, y, x, y, TRANS)) {\n      found = true;\n    }\n  }\n  return { x: x, y: y };\n}\n\nfunction generateThingsAndEnemies(onMap, width, height, dungeonFloor) {\n  var things = getArray(width, height, function () {\n    return TRANS_BLOCK;\n  });\n  var enemies = [];\n  // put a down stairs\n  putOneThing(STAIRS_BLOCK, things, width, height, onMap, 1, 1);\n  // put a weapon for this floor\n  putOneThing(getWeaponByFloor(dungeonFloor), things, width, height, onMap, 1, 1);\n  // put 3 to 5 medicines\n  [].concat(_toConsumableArray(Array(getRandomInt(3, 6)))).map(function (v, i) {\n    return i;\n  }).forEach(function () {\n    putOneThing({ type: MEDICINE, capacity: 50 }, things, width, height, onMap, 1, 1);\n  });\n  // put 5 to 7 enemies\n  [].concat(_toConsumableArray(Array(getRandomInt(5, 8)))).map(function (v, i) {\n    return i;\n  }).forEach(function () {\n    var enemy = getEnemyByFloor(dungeonFloor);\n    enemies.push(enemy);\n    putOneThing({ type: ENEMY, id: enemies.length - 1 }, things, width, height, onMap, 1, 1);\n  });\n  if (dungeonFloor === 4) {\n    // put a boss\n    var boss = getBossByFloor(dungeonFloor);\n    enemies.push(boss);\n    putOneThing({ type: BOSS, id: enemies.lenght - 1 }, things, width, height, onMap, 3, 3);\n  }\n  return { things: things, enemies: enemies };\n}\n\nfunction deepFreeze(o) {\n  Object.freeze(o);\n\n  Object.getOwnPropertyNames(o).forEach(function (prop) {\n    if (o.hasOwnProperty(prop) && o[prop] !== null && (_typeof(o[prop]) === \"object\" || typeof o[prop] === \"function\") && !Object.isFrozen(o[prop])) {\n      deepFreeze(o[prop]);\n    }\n  });\n\n  return o;\n}\n\"use strict\";\n\nvar initialDarknessState = ON;\n\nfunction darkness() {\n  var state = arguments.length <= 0 || arguments[0] === undefined ? initialDarknessState : arguments[0];\n  var action = arguments[1];\n\n  switch (action.type) {\n    case TOGGLE_DARKNESS:\n      state = state === ON ? OFF : ON;\n      return state;\n    default:\n      return state;\n  }\n}\n\"use strict\";\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction generateInitialGameState() {\n  var map = generateMap(MAP_WIDTH, MAP_HEIGHT);\n\n  var _generateThingsAndEne = generateThingsAndEnemies(map, MAP_WIDTH, MAP_HEIGHT, 1);\n\n  var things = _generateThingsAndEne.things;\n  var enemies = _generateThingsAndEne.enemies;\n\n  var player = generatePlayerPosition(map, things, MAP_WIDTH, MAP_HEIGHT);\n\n  var health = 100;\n  var level = 1;\n  var exps = 0;\n  var nextLevelExps = 50;\n  var weapon = null;\n  var attack = calPlayerAttack(level, weapon);\n\n  player = _extends({}, player, { health: health, level: level, exps: exps, nextLevelExps: nextLevelExps, weapon: weapon, attack: attack });\n\n  return {\n    map: map,\n    things: things,\n    enemies: enemies,\n    player: player,\n    message: \"\",\n    dungeonFloor: 1\n  };\n}\n\n// const initialGameState = generateInitialGameState();\nvar initialGameState = generateInitialGameState();\n\nfunction game() {\n  var state = arguments.length <= 0 || arguments[0] === undefined ? initialGameState : arguments[0];\n  var action = arguments[1];\n\n  switch (action.type) {\n    case PLAYER_MOVE:\n      {\n        var pos = getNewPosition(state.player, action.direction);\n        var player = _extends({}, state.player, pos);\n        return _extends({}, state, { player: player });\n      }\n    case DOWN_STAIRS:\n      {\n        var map = action.map;\n        var things = action.things;\n        var enemies = action.enemies;\n        var _player = action.player;\n        var dungeonFloor = action.dungeonFloor;\n\n        var oldPlayer = state.player;\n        var nextPlayer = _extends({}, oldPlayer, _player);\n        return _extends({}, state, {\n          map: map,\n          things: things,\n          enemies: enemies,\n          player: nextPlayer,\n          dungeonFloor: dungeonFloor\n        });\n      }\n    case FIGHT:\n      {\n        var _pos = getNewPosition(state.player, action.direction);\n        var _things = state.things.map(function (row) {\n          return row.map(function (v) {\n            return v;\n          });\n        });\n        var enemyInThings = _things[_pos.y][_pos.x];\n        var _enemies = [].concat(_toConsumableArray(state.enemies));\n        var enemy = _extends({}, _enemies[enemyInThings.id]);\n        _enemies[enemyInThings.id] = enemy;\n        var _player2 = _extends({}, state.player);\n        var message = state.message;\n\n        // player attack enemy\n        enemy.health -= _player2.attack;\n        if (enemy.health <= 0) {\n          _player2.exps += enemy.life;\n          if (_player2.exps >= _player2.nextLevelExps) {\n            _player2.exps -= _player2.nextLevelExps;\n            _player2.level += 1;\n            _player2.nextLevelExps = _player2.level * 50;\n            _player2.attack = calPlayerAttack(_player2.level, _player2.weapon);\n          }\n          _player2.x = _pos.x;\n          _player2.y = _pos.y;\n          _things[_pos.y][_pos.x] = TRANS_BLOCK;\n        }\n\n        // enemy attack\n        if (enemy.health > 0) {\n          _player2.health -= enemy.attack;\n        }\n        return _extends({}, state, { enemies: _enemies, things: _things, player: _player2, message: message });\n      }\n    case EAT:\n      {\n        var _pos2 = getNewPosition(state.player, action.direction);\n        var _things2 = state.things.map(function (row) {\n          return row.map(function (v) {\n            return v;\n          });\n        });\n        var medicine = _things2[_pos2.y][_pos2.x];\n        var _player3 = _extends({}, state.player, _pos2);\n        _player3.health += medicine.capacity;\n        _things2[_pos2.y][_pos2.x] = TRANS_BLOCK;\n        return _extends({}, state, { things: _things2, player: _player3 });\n      }\n\n    case PICKUP:\n      {\n        var _pos3 = getNewPosition(state.player, action.direction);\n        var _things3 = state.things.map(function (row) {\n          return row.map(function (v) {\n            return v;\n          });\n        });\n        var weapon = _things3[_pos3.y][_pos3.x];\n        var _player4 = _extends({}, state.player, _pos3);\n        _player4.weapon = weapon;\n        _player4.attack = calPlayerAttack(_player4.level, _player4.weapon);\n        _things3[_pos3.y][_pos3.x] = TRANS_BLOCK;\n        return _extends({}, state, { things: _things3, player: _player4 });\n      }\n    case SET_MESSAGE:\n      {\n        return _extends({}, state, { message: action.message });\n      }\n    default:\n      return state;\n  }\n}\n\"use strict\";\n\nvar combineReducers = Redux.combineReducers;\n\nvar rootReducer = combineReducers({\n  game: game,\n  darkness: darkness\n});\n\"use strict\";\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction toggleDarkness() {\n  return { type: TOGGLE_DARKNESS };\n}\n\nfunction playerMove(direction) {\n  return { type: PLAYER_MOVE, direction: direction };\n}\n\nfunction downStairs(map, things, enemies, player, dungeonFloor) {\n  return { type: DOWN_STAIRS, map: map, things: things, enemies: enemies, player: player, dungeonFloor: dungeonFloor };\n}\n\nfunction fight(direction) {\n  return { type: FIGHT, direction: direction };\n}\n\nfunction eat(direction) {\n  return { type: EAT, direction: direction };\n}\n\nfunction pickup(direction) {\n  return { type: PICKUP, direction: direction };\n}\n\nfunction handleMove(direction) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var game = state.game;\n    var map = game.map;\n    var things = game.things;\n    var enemies = game.enemies;\n    var player = game.player;\n\n    var _getNewPosition = getNewPosition(player, direction);\n\n    var x = _getNewPosition.x;\n    var y = _getNewPosition.y;\n\n\n    if (x < 0 || x >= MAP_WIDTH || y < 0 || y >= MAP_HEIGHT) {\n      return;\n    }\n    var brickType = things[y][x].type === TRANS ? map[y][x].type : things[y][x].type;\n    switch (brickType) {\n      case SPACE:\n        dispatch(playerMove(direction));\n        break;\n      case STAIRS:\n        {\n          var _map = generateMap(MAP_WIDTH, MAP_HEIGHT);\n          var dungeonFloor = game.dungeonFloor + 1;\n\n          var _generateThingsAndEne = generateThingsAndEnemies(_map, MAP_WIDTH, MAP_HEIGHT, dungeonFloor);\n\n          var _things = _generateThingsAndEne.things;\n          var _enemies = _generateThingsAndEne.enemies;\n\n          var _player = generatePlayerPosition(_map, _things, MAP_WIDTH, MAP_HEIGHT);\n          dispatch(downStairs(_map, _things, _enemies, _player, dungeonFloor));\n          break;\n        }\n      case ENEMY:\n        dispatch(fight(direction));\n        break;\n      case MEDICINE:\n        dispatch(eat(direction));\n        break;\n      case WEAPON:\n        dispatch(pickup(direction));\n        break;\n      default:\n        break;\n    }\n  };\n}\n\nfunction setMessage(message) {\n  return { type: SET_MESSAGE, message: message };\n}\n\nfunction startNewGame() {\n  return function (dispatch, getState) {\n    var map = generateMap(MAP_WIDTH, MAP_HEIGHT);\n    var dungeonFloor = 1;\n\n    var _generateThingsAndEne2 = generateThingsAndEnemies(map, MAP_WIDTH, MAP_HEIGHT, dungeonFloor);\n\n    var things = _generateThingsAndEne2.things;\n    var enemies = _generateThingsAndEne2.enemies;\n\n\n    var player = generatePlayerPosition(map, things, MAP_WIDTH, MAP_HEIGHT);\n\n    var health = 100;\n    var level = 1;\n    var exps = 0;\n    var nextLevelExps = 50;\n    var weapon = null;\n    var attack = calPlayerAttack(level, weapon);\n\n    player = _extends({}, player, { health: health, level: level, exps: exps, nextLevelExps: nextLevelExps, weapon: weapon, attack: attack });\n\n    dispatch(downStairs(map, things, enemies, player, dungeonFloor));\n    setTimeout(function () {\n      dispatch(setMessage(\"\"));\n    }, 5000);\n  };\n}\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar App = function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    _classCallCheck(this, App);\n\n    // This line is important!\n    var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));\n\n    _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: 'handleKeyDown',\n    value: function handleKeyDown(event) {\n      var keyName = event.key;\n      switch (keyName) {\n        case 'ArrowUp':\n          this.props.onDocumentKeyDown(UP);\n          break;\n        case 'ArrowLeft':\n          this.props.onDocumentKeyDown(LEFT);\n          break;\n        case 'ArrowRight':\n          this.props.onDocumentKeyDown(RIGHT);\n          break;\n        case 'ArrowDown':\n          this.props.onDocumentKeyDown(DOWN);\n          break;\n        default:\n          break;\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      document.addEventListener('keydown', this.handleKeyDown);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      document.removeEventListener('keydown', this.handleKeyDown);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var playerAlive = nextProps.playerAlive;\n      var bossAlive = nextProps.bossAlive;\n\n\n      var message = \"\";\n      if (!playerAlive) {\n        message = \"You've been killed, better luck next time.\";\n      } else if (!bossAlive) {\n        message = \"Congratulations, you win! Now begin new game.\";\n      }\n\n      if (!playerAlive || !bossAlive) {\n        this.props.onSetMessage(message);\n        this.props.onStartNewGame();\n      }\n    }\n  }, {\n    key: 'flashMessage',\n    value: function flashMessage() {\n      return this.props.message === \"\" ? React.createElement('span', null) : React.createElement(\n        'div',\n        { id: 'note' },\n        this.props.message\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return React.createElement(\n        'div',\n        { className: 'HolyGrail' },\n        this.flashMessage(),\n        React.createElement(Header, null),\n        React.createElement(\n          'div',\n          { className: 'HolyGrail-body' },\n          React.createElement(\n            'main',\n            { className: 'HolyGrail-content' },\n            React.createElement(\n              ConnPos,\n              null,\n              React.createElement(Background, null),\n              React.createElement(Things, null),\n              React.createElement(Ui, null),\n              React.createElement(Mask, null)\n            )\n          )\n        ),\n        React.createElement(Footer, null)\n      );\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nApp.propTypes = {\n  onDocumentKeyDown: React.PropTypes.func.isRequired,\n  onStartNewGame: React.PropTypes.func.isRequired,\n  onSetMessage: React.PropTypes.func.isRequired,\n  playerAlive: React.PropTypes.bool.isRequired,\n  bossAlive: React.PropTypes.bool.isRequired,\n  message: React.PropTypes.string.isRequired\n};\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Board = function (_React$Component) {\n  _inherits(Board, _React$Component);\n\n  function Board() {\n    _classCallCheck(this, Board);\n\n    return _possibleConstructorReturn(this, (Board.__proto__ || Object.getPrototypeOf(Board)).apply(this, arguments));\n  }\n\n  _createClass(Board, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return this.props.data !== nextProps.data;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\n        \"table\",\n        null,\n        React.createElement(\n          \"tbody\",\n          null,\n          this.props.data.map(function (v, i) {\n            return React.createElement(BoardRow, { key: i, data: v });\n          })\n        )\n      );\n    }\n  }]);\n\n  return Board;\n}(React.Component);\n\nBoard.propTypes = {\n  data: React.PropTypes.arrayOf(React.PropTypes.arrayOf(React.PropTypes.shape({\n    type: React.PropTypes.number\n  }))).isRequired\n};\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BoardCell = function (_React$Component) {\n  _inherits(BoardCell, _React$Component);\n\n  function BoardCell() {\n    _classCallCheck(this, BoardCell);\n\n    return _possibleConstructorReturn(this, (BoardCell.__proto__ || Object.getPrototypeOf(BoardCell)).apply(this, arguments));\n  }\n\n  _createClass(BoardCell, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return this.props.data !== nextProps.data;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var className = void 0;\n      switch (this.props.data) {\n        case SOIL:\n          className = null;\n          break;\n        case SPACE:\n          className = \"room\";\n          break;\n        case ENEMY:\n          className = \"enemy\";\n          break;\n        case BOSS:\n          className = \"enemy\";\n          break;\n        case MEDICINE:\n          className = \"medicine\";\n          break;\n        case PLAYER:\n          className = \"player\";\n          break;\n        case WEAPON:\n          className = \"weapon\";\n          break;\n        case STAIRS:\n          className = \"stairs\";\n          break;\n        case BLACK:\n          className = \"black\";\n          break;\n        default:\n          className = null;\n      }\n      return React.createElement(\"td\", { className: className });\n    }\n  }]);\n\n  return BoardCell;\n}(React.Component);\n\nBoardCell.propTypes = {\n  data: React.PropTypes.number.isRequired\n};\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BoardRow = function (_React$Component) {\n  _inherits(BoardRow, _React$Component);\n\n  function BoardRow() {\n    _classCallCheck(this, BoardRow);\n\n    return _possibleConstructorReturn(this, (BoardRow.__proto__ || Object.getPrototypeOf(BoardRow)).apply(this, arguments));\n  }\n\n  _createClass(BoardRow, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return this.props.data !== nextProps.data;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\n        \"tr\",\n        null,\n        this.props.data.map(function (v, i) {\n          return React.createElement(BoardCell, { key: i, data: v.type });\n        })\n      );\n    }\n  }]);\n\n  return BoardRow;\n}(React.Component);\n\nBoardRow.propTypes = {\n  data: React.PropTypes.arrayOf(React.PropTypes.shape({\n    type: React.PropTypes.number\n  })).isRequired\n};\n\"use strict\";\n\nfunction Footer() {\n  return React.createElement(\n    \"footer\",\n    { className: \"HolyGrail-footer\" },\n    \"♥ from the Zhenkyle\"\n  );\n}\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Pos = function (_React$Component) {\n  _inherits(Pos, _React$Component);\n\n  function Pos() {\n    _classCallCheck(this, Pos);\n\n    return _possibleConstructorReturn(this, (Pos.__proto__ || Object.getPrototypeOf(Pos)).apply(this, arguments));\n  }\n\n  _createClass(Pos, [{\n    key: \"render\",\n    value: function render() {\n      var children = this.props.children;\n      return React.createElement(\n        \"div\",\n        { style: { top: this.props.top + \"px\", left: this.props.left + \"px\" } },\n        children\n      );\n    }\n  }]);\n\n  return Pos;\n}(React.Component);\n\nPos.propTypes = {\n  top: React.PropTypes.number.isRequired,\n  left: React.PropTypes.number.isRequired,\n  children: React.PropTypes.arrayOf(React.PropTypes.element).isRequired\n};\n\"use strict\";\n\nvar connect = ReactRedux.connect;\n\nfunction mapStateToPropsBackground(state) {\n  return {\n    data: state.game.map\n  };\n}\n\nvar Background = connect(mapStateToPropsBackground)(Board);\n\"use strict\";\n\nvar connect = ReactRedux.connect;\n\nfunction mapStateToPropsApp(state) {\n  var playerHealth = state.game.player.health;\n  var bossHealth = state.game.enemies[state.game.enemies.length - 1].health;\n  var dungeonFloor = state.game.dungeonFloor;\n  var playerAlive = playerHealth > 0;\n  var bossAlive = !(dungeonFloor === 4 && bossHealth < 0);\n  var message = state.game.message;\n  return { playerAlive: playerAlive, bossAlive: bossAlive, message: message };\n}\n\nfunction mapDispatchToPropsApp(dispatch) {\n  return {\n    onDocumentKeyDown: function onDocumentKeyDown(direction) {\n      dispatch(handleMove(direction));\n    },\n    onStartNewGame: function onStartNewGame() {\n      dispatch(startNewGame());\n    },\n    onSetMessage: function onSetMessage(message) {\n      dispatch(setMessage(message));\n    }\n  };\n}\n\nvar ConnApp = connect(mapStateToPropsApp, mapDispatchToPropsApp)(App);\n\"use strict\";\n\nvar connect = ReactRedux.connect;\n\nfunction mapStateToPropsPos(state) {\n  var _state$game$player = state.game.player;\n  var playerX = _state$game$player.x;\n  var playerY = _state$game$player.y;\n\n  var mapWidth = MAP_WIDTH;\n  var mapHeight = MAP_HEIGHT;\n  var viewWidth = VIEW_WIDTH;\n  var viewHeight = VIEW_HEIGHT;\n\n  var _getOffset = getOffset(playerX, playerY, mapWidth, mapHeight, viewWidth, viewHeight);\n\n  var left = _getOffset.left;\n  var top = _getOffset.top;\n\n  return {\n    left: left * 10,\n    top: top * 10\n  };\n}\n\nvar ConnPos = connect(mapStateToPropsPos)(Pos);\n\"use strict\";\n\nvar connect = ReactRedux.connect;\n\nvar Header = function Header(_ref) {\n  var onToggleDarknessClick = _ref.onToggleDarknessClick;\n  var health = _ref.health;\n  var weapon = _ref.weapon;\n  var attack = _ref.attack;\n  var level = _ref.level;\n  var nextLevelExps = _ref.nextLevelExps;\n  var dungeonFloor = _ref.dungeonFloor;\n\n  return React.createElement(\n    \"header\",\n    { className: \"HolyGrail-header\" },\n    React.createElement(\n      \"h1\",\n      null,\n      \"Dungeon Crawler\"\n    ),\n    React.createElement(\n      \"h4\",\n      null,\n      \"Kill the boss in dungeon 4\"\n    ),\n    React.createElement(\n      \"p\",\n      null,\n      React.createElement(\n        \"strong\",\n        null,\n        \"Health:\"\n      ),\n      \" \",\n      health,\n      \" \",\n      React.createElement(\n        \"strong\",\n        null,\n        \"Weapon:\"\n      ),\n      \" \",\n      weapon,\n      \" \",\n      React.createElement(\n        \"strong\",\n        null,\n        \"Attack:\"\n      ),\n      \" \",\n      attack,\n      \" \",\n      React.createElement(\n        \"strong\",\n        null,\n        \"Level:\"\n      ),\n      \" \",\n      level,\n      \" \",\n      React.createElement(\n        \"strong\",\n        null,\n        \"Next Level:\"\n      ),\n      \" \",\n      nextLevelExps,\n      \"XP \",\n      React.createElement(\n        \"strong\",\n        null,\n        \"Dungeon:\"\n      ),\n      \" \",\n      dungeonFloor,\n      \" \",\n      React.createElement(\n        \"button\",\n        { onClick: onToggleDarknessClick },\n        \"Toggle Darkness\"\n      )\n    )\n  );\n};\nHeader.propTypes = {\n  onToggleDarknessClick: React.PropTypes.func.isRequired,\n  health: React.PropTypes.number.isRequired,\n  weapon: React.PropTypes.string.isRequired,\n  attack: React.PropTypes.number.isRequired,\n  level: React.PropTypes.number.isRequired,\n  nextLevelExps: React.PropTypes.number.isRequired,\n  dungeonFloor: React.PropTypes.number.isRequired\n};\n\nfunction mapStateToPropsHeader(state) {\n  var player = state.game.player;\n  return { health: player.health,\n    weapon: player.weapon === null ? \"\" : player.weapon.name,\n    attack: player.attack,\n    level: player.level,\n    nextLevelExps: player.nextLevelExps,\n    dungeonFloor: state.game.dungeonFloor\n  };\n}\n\nfunction mapDispatchToPropsHeader(dispatch) {\n  return {\n    onToggleDarknessClick: function onToggleDarknessClick() {\n      dispatch(toggleDarkness());\n    }\n  };\n}\n\nHeader = connect(mapStateToPropsHeader, mapDispatchToPropsHeader)(Header);\n\"use strict\";\n\nvar connect = ReactRedux.connect;\n\nfunction mapStateToPropsMask(state) {\n  var player = state.game.player;\n\n  var mapWidth = MAP_WIDTH;\n  var mapHeight = MAP_HEIGHT;\n  var darkness = state.darkness;\n  var x = player.x;\n  var y = player.y;\n\n  var data = void 0;\n  if (darkness === OFF) {\n    data = getArray(mapWidth, mapHeight, function () {\n      return TRANS_BLOCK;\n    });\n  } else {\n    data = getArray(mapWidth, mapHeight, function () {\n      return BLACK_BLOCK;\n    });\n    var shape = [[BLACK_BLOCK, BLACK_BLOCK, BLACK_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, BLACK_BLOCK, BLACK_BLOCK, BLACK_BLOCK], [BLACK_BLOCK, BLACK_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, BLACK_BLOCK, BLACK_BLOCK], [BLACK_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, BLACK_BLOCK], [TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK], [TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK], [TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK], [TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK], [TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK], [TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK], [TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK], [BLACK_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, BLACK_BLOCK], [BLACK_BLOCK, BLACK_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, BLACK_BLOCK, BLACK_BLOCK], [BLACK_BLOCK, BLACK_BLOCK, BLACK_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, TRANS_BLOCK, BLACK_BLOCK, BLACK_BLOCK, BLACK_BLOCK]];\n    var shapeWidth = shape[0].length;\n    var shapeHeight = shape.length;\n    var maskX = void 0;\n    var maskY = void 0;\n    for (var j = 0; j < shapeHeight; j++) {\n      maskY = y + j - Math.floor(shapeHeight / 2);\n      if (maskY < 0 || maskY > mapHeight - 1) {\n        break;\n      }\n      for (var i = 0; i < shapeWidth; i++) {\n        maskX = x + i - Math.floor(shapeWidth / 2);\n        if (maskX < 0 || maskX > mapWidth - 1) {\n          break;\n        }\n        data[maskY][maskX] = shape[j][i];\n      }\n    }\n  }\n\n  return {\n    data: data\n  };\n}\n\nvar Mask = connect(mapStateToPropsMask)(Board);\n\"use strict\";\n\nvar connect = ReactRedux.connect;\n\nfunction mapStateToPropsThings(state) {\n  return {\n    data: state.game.things\n  };\n}\n\nvar Things = connect(mapStateToPropsThings)(Board);\n\"use strict\";\n\nvar connect = ReactRedux.connect;\n\nfunction mapStateToPropsUI(state) {\n  var player = state.game.player;\n\n  var mapWidth = MAP_WIDTH;\n  var mapHeight = MAP_HEIGHT;\n  var x = player.x;\n  var y = player.y;\n\n  var data = getArray(mapWidth, mapHeight, function () {\n    return TRANS_BLOCK;\n  });\n  data[y][x] = PLAYER_BLOCK;\n\n  var _state$game$player = state.game.player;\n  var playerX = _state$game$player.x;\n  var playerY = _state$game$player.y;\n\n  var viewWidth = VIEW_WIDTH;\n  var viewHeight = VIEW_HEIGHT;\n\n  var _getOffset = getOffset(playerX, playerY, mapWidth, mapHeight, viewWidth, viewHeight);\n\n  var left = _getOffset.left;\n  var top = _getOffset.top;\n\n  return {\n    data: data,\n    left: left * 10,\n    top: top * 10\n  };\n}\n\nvar Ui = connect(mapStateToPropsUI)(Board);\n'use strict';\n\nvar Provider = ReactRedux.Provider;\nvar store = Redux.createStore(rootReducer, Redux.compose(Redux.applyMiddleware(ReduxThunk.default), window.devToolsExtension ? window.devToolsExtension() : function (f) {\n  return f;\n}));\nReactDOM.render(React.createElement(\n  Provider,\n  { store: store },\n  React.createElement(ConnApp, null)\n), document.getElementById('root'));"],"sourceRoot":"/source/"}